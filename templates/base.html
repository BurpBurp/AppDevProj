<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='scripts/flash.js') }}"></script>
    
    {% block head %}{% endblock %}

    <script>
      var $loading = $('.loadingDiv').addClass("d-none");
      $(document)
      .ajaxStart(function () {
          console.log("ShowDiv")
          $('.loadingDiv').removeClass("d-none");
      })
      .ajaxStop(function () {
          console.log("HideDiv")
          $('.loadingDiv').addClass("d-none");
      });
      {% block headscript %}
      {% endblock %}
    </script>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/loader.css') }}">
</head>
<body class="d-flex flex-column min-vh-100">
    <div class="loader d-none loadingDiv"></div>
    <div id="loadingDiv" class="d-none loadingDiv"></div>

    {% include 'includes/navbar-2.html' %}

    <div id="flashes">
      {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
              {% for category, message in messages %}
              
                {% if category == "success" %}
                  <div class="alert alert-success alert-dismissible" role="alert">
                {% elif category == "error" %}
                  <div class="alert alert-danger alert-dismissible" role="alert">
                {% else %}
                  <div class="alert alert-primary alert-dismissible" role="alert">
                {% endif %}

                  {{message}}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
              {% endfor %}
          {% endif %}
      {% endwith %}
    </div>
    <main>
        {% block main %}{% endblock %}
    </main>
    <footer class="mt-auto">{% include 'includes/footer.html' %}</footer>

    {% block scripts %}{% endblock %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
</body>
</html>
